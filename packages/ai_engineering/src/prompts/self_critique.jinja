Self-Critique Prompt for Entity & Relation Extraction

Variables:
  - json_input: dict with keys:
      - "text": the full transcript (string)
      - "extracted": the previously extracted JSON (dict) to review
      - optional: other context like {"date": "...", "language": "Dutch"}

Instructions:
- You are an AI assistant reviewing a previous extraction (entities + relations) from a Dutch radio bulletin.
- Use the provided transcript to verify spans, context sentences, presence/absence of entities, and relation endpoints.
- Focus checks on:
    1. Missing entities (people, organizations, locations, events, artifacts, publications).
    2. Incorrect or inconsistent `context_sentence` or `text_span` (must match text).
    3. Relations that reference non-existent entity IDs or duplicate IDs.
    4. Required fields that are empty or badly formatted.
    5. Probable false positives (entities that don't appear in the transcript), duplicates, and overlapping spans.
- If you suggest corrections, only propose changes you can justify from the transcript snippet.
- Do NOT output any extra explanation or reasoning outside the required JSON.


Output format:
JSON only, matching the `SelfCritiqueOutput` schema.

Input:
---
TRANSCRIPT:
{{ text }}

EXTRACTED_JSON:
{{ json_input.extracted | tojson }}
---

${gr.complete_json_suffix_v2}